basePath: /
definitions:
  chaintracks.BlockHeader:
    properties:
      bits:
        description: 4 bytes - Difficulty target
        type: integer
      hash:
        items:
          type: integer
        type: array
      height:
        description: Block height in the chain
        type: integer
      merkleRoot:
        description: 32 bytes - Merkle root hash
        items:
          type: integer
        type: array
      nonce:
        description: 4 bytes - Nonce
        type: integer
      previousHash:
        description: 32 bytes - Previous block hash
        items:
          type: integer
        type: array
      time:
        description: 4 bytes - Block timestamp (Unix time)
        type: integer
      version:
        description: 4 bytes - Block version
        type: integer
    type: object
  fiber.ErrorResponse:
    properties:
      error:
        example: Header not found
        type: string
    type: object
  fiber.FeeAmount:
    properties:
      bytes:
        type: integer
      satoshis:
        type: integer
    type: object
  fiber.HealthResponse:
    properties:
      healthy:
        type: boolean
      reason:
        type: string
      version:
        type: string
    type: object
  fiber.HeightResponse:
    properties:
      height:
        example: 874123
        type: integer
    type: object
  fiber.NetworkResponse:
    properties:
      network:
        example: mainnet
        type: string
    type: object
  fiber.PolicyResponse:
    properties:
      maxscriptsizepolicy:
        type: integer
      maxtxsigopscountspolicy:
        type: integer
      maxtxsizepolicy:
        type: integer
      miningFee:
        $ref: '#/definitions/fiber.FeeAmount'
    type: object
  fiber.TransactionRequest:
    properties:
      rawTx:
        example: 0100000001...
        type: string
    type: object
  models.Status:
    enum:
    - UNKNOWN
    - RECEIVED
    - SENT_TO_NETWORK
    - ACCEPTED_BY_NETWORK
    - SEEN_ON_NETWORK
    - DOUBLE_SPEND_ATTEMPTED
    - REJECTED
    - MINED
    - IMMUTABLE
    type: string
    x-enum-varnames:
    - StatusUnknown
    - StatusReceived
    - StatusSentToNetwork
    - StatusAcceptedByNetwork
    - StatusSeenOnNetwork
    - StatusDoubleSpendAttempted
    - StatusRejected
    - StatusMined
    - StatusImmutable
  models.TransactionStatus:
    properties:
      blockHash:
        type: string
      blockHeight:
        type: integer
      competingTxs:
        items:
          type: string
        type: array
      extraInfo:
        type: string
      merklePath:
        items:
          type: integer
        type: array
      timestamp:
        type: string
      txStatus:
        $ref: '#/definitions/models.Status'
      txid:
        type: string
    type: object
info:
  contact:
    name: BSV Blockchain
    url: https://github.com/bsv-blockchain/arcade
  description: BSV transaction broadcast service with ARC-compatible endpoints.
  license:
    name: Open BSV License
    url: https://github.com/bsv-blockchain/arcade/blob/main/LICENSE
  title: Arcade API
  version: 0.1.0
paths:
  /events/{callbackToken}:
    get:
      description: Server-Sent Events stream of transaction status updates for transactions
        associated with the callback token
      parameters:
      - description: Callback token from transaction submission
        in: path
        name: callbackToken
        required: true
        type: string
      produces:
      - text/event-stream
      responses:
        "200":
          description: SSE stream of transaction status updates
          schema:
            type: string
      summary: Stream transaction events
      tags:
      - transactions
  /health:
    get:
      description: Returns the health status of the service
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/fiber.HealthResponse'
      summary: Health check
      tags:
      - info
  /policy:
    get:
      description: Returns the transaction policy configuration including fee rates
        and limits
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/fiber.PolicyResponse'
      summary: Get policy
      tags:
      - info
  /tx:
    post:
      consumes:
      - application/json
      - application/octet-stream
      - text/plain
      description: Submit a single transaction for broadcast. Accepts raw transaction
        bytes, hex string, or JSON with rawTx field.
      parameters:
      - description: Transaction data
        in: body
        name: transaction
        required: true
        schema:
          $ref: '#/definitions/fiber.TransactionRequest'
      - description: URL for status callbacks
        in: header
        name: X-CallbackUrl
        type: string
      - description: Token for SSE event filtering
        in: header
        name: X-CallbackToken
        type: string
      - description: Send all status updates (true/false)
        in: header
        name: X-FullStatusUpdates
        type: string
      - description: Skip fee validation (true/false)
        in: header
        name: X-SkipFeeValidation
        type: string
      - description: Skip script validation (true/false)
        in: header
        name: X-SkipScriptValidation
        type: string
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/models.TransactionStatus'
        "400":
          description: Bad Request
          schema:
            additionalProperties:
              type: string
            type: object
        "500":
          description: Internal Server Error
          schema:
            additionalProperties:
              type: string
            type: object
      summary: Submit transaction
      tags:
      - transactions
  /tx/{txid}:
    get:
      description: Get the current status of a submitted transaction
      parameters:
      - description: Transaction ID
        in: path
        name: txid
        required: true
        type: string
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/models.TransactionStatus'
        "404":
          description: Not Found
          schema:
            additionalProperties:
              type: string
            type: object
        "500":
          description: Internal Server Error
          schema:
            additionalProperties:
              type: string
            type: object
      summary: Get transaction status
      tags:
      - transactions
  /txs:
    post:
      consumes:
      - application/json
      description: Submit multiple transactions for broadcast
      parameters:
      - description: Array of transactions
        in: body
        name: transactions
        required: true
        schema:
          items:
            $ref: '#/definitions/fiber.TransactionRequest'
          type: array
      - description: Skip fee validation (true/false)
        in: header
        name: X-SkipFeeValidation
        type: string
      - description: Skip script validation (true/false)
        in: header
        name: X-SkipScriptValidation
        type: string
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            items:
              $ref: '#/definitions/models.TransactionStatus'
            type: array
        "400":
          description: Bad Request
          schema:
            additionalProperties:
              type: string
            type: object
      summary: Submit multiple transactions
      tags:
      - transactions
  /v2/header/hash/{hash}:
    get:
      description: Returns a block header with the specified hash
      parameters:
      - description: Block hash (hex)
        in: path
        name: hash
        required: true
        type: string
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/chaintracks.BlockHeader'
        "400":
          description: Bad Request
          schema:
            $ref: '#/definitions/fiber.ErrorResponse'
        "404":
          description: Not Found
          schema:
            $ref: '#/definitions/fiber.ErrorResponse'
      summary: Get header by hash
      tags:
      - chaintracks
  /v2/header/height/{height}:
    get:
      description: Returns a block header at the specified height
      parameters:
      - description: Block height
        in: path
        name: height
        required: true
        type: integer
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/chaintracks.BlockHeader'
        "400":
          description: Bad Request
          schema:
            $ref: '#/definitions/fiber.ErrorResponse'
        "404":
          description: Not Found
          schema:
            $ref: '#/definitions/fiber.ErrorResponse'
      summary: Get header by height
      tags:
      - chaintracks
  /v2/headers:
    get:
      description: Returns block headers starting from height as binary data (80 bytes
        per header)
      parameters:
      - description: Starting block height
        in: query
        name: height
        required: true
        type: integer
      - description: Number of headers to return
        in: query
        name: count
        required: true
        type: integer
      produces:
      - application/octet-stream
      responses:
        "200":
          description: Concatenated 80-byte headers
          schema:
            type: string
        "400":
          description: Bad Request
          schema:
            $ref: '#/definitions/fiber.ErrorResponse'
      summary: Get multiple headers
      tags:
      - chaintracks
  /v2/height:
    get:
      description: Returns the current blockchain height
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/fiber.HeightResponse'
      summary: Get chain height
      tags:
      - chaintracks
  /v2/network:
    get:
      description: Returns the Bitcoin network this service is connected to
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/fiber.NetworkResponse'
        "500":
          description: Internal Server Error
          schema:
            $ref: '#/definitions/fiber.ErrorResponse'
      summary: Get network name
      tags:
      - chaintracks
  /v2/tip:
    get:
      description: Returns the current chain tip block header
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/chaintracks.BlockHeader'
        "404":
          description: Not Found
          schema:
            $ref: '#/definitions/fiber.ErrorResponse'
      summary: Get chain tip
      tags:
      - chaintracks
  /v2/tip/stream:
    get:
      description: Server-Sent Events stream of chain tip updates. Sends the current
        tip immediately, then broadcasts new tips as they arrive.
      produces:
      - text/event-stream
      responses:
        "200":
          description: SSE stream of BlockHeader JSON objects
          schema:
            type: string
      summary: Stream chain tip updates
      tags:
      - chaintracks
securityDefinitions:
  BearerAuth:
    description: Bearer token authentication
    in: header
    name: Authorization
    type: apiKey
swagger: "2.0"
