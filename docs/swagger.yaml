basePath: /
definitions:
  errors.ErrorFields:
    properties:
      detail:
        type: string
      extraInfo:
        type: string
      status:
        type: integer
      title:
        type: string
      type:
        type: string
    type: object
  fiber.TransactionRequest:
    properties:
      rawTx:
        example: 0100000001...
        type: string
    type: object
  models.Policy:
    properties:
      maxscriptsizepolicy:
        type: integer
      maxtxsigopscountspolicy:
        type: integer
      maxtxsizepolicy:
        type: integer
      miningFeeBytes:
        type: integer
      miningFeeSatoshis:
        type: integer
    type: object
  models.Status:
    enum:
      - UNKNOWN
      - RECEIVED
      - SENT_TO_NETWORK
      - ACCEPTED_BY_NETWORK
      - SEEN_ON_NETWORK
      - DOUBLE_SPEND_ATTEMPTED
      - REJECTED
      - MINED
      - IMMUTABLE
    type: string
    x-enum-varnames:
      - StatusUnknown
      - StatusReceived
      - StatusSentToNetwork
      - StatusAcceptedByNetwork
      - StatusSeenOnNetwork
      - StatusDoubleSpendAttempted
      - StatusRejected
      - StatusMined
      - StatusImmutable
  models.TransactionStatus:
    properties:
      blockHash:
        type: string
      blockHeight:
        type: integer
      competingTxs:
        items:
          type: string
        type: array
      extraInfo:
        type: string
      merklePath:
        items:
          type: integer
        type: array
      timestamp:
        type: string
      txStatus:
        $ref: '#/definitions/models.Status'
      txid:
        type: string
    type: object
info:
  contact:
    name: BSV Blockchain
    url: https://github.com/bsv-blockchain/arcade
  description: BSV transaction broadcast service with ARC-compatible endpoints.
  license:
    name: Open BSV License
    url: https://github.com/bsv-blockchain/arcade/blob/main/LICENSE
  title: Arcade API
  version: 0.1.0
paths:
  /events:
    get:
      description: Server-Sent Events stream of transaction status updates. If callbackToken is provided, only events for that token are streamed.
      parameters:
        - description: Callback token from transaction submission
          in: query
          name: callbackToken
          type: string
      produces:
        - text/event-stream
      responses:
        "200":
          description: SSE stream of transaction status updates
          schema:
            type: string
      summary: Stream transaction events
      tags:
        - arcade
  /health:
    get:
      description: Returns the health status of the service
      produces:
        - text/plain
      responses:
        "200":
          description: OK
          schema:
            type: string
        "503":
          description: Service Unavailable
          schema:
            type: string
      summary: Health check
      tags:
        - arcade
  /policy:
    get:
      description: Returns the transaction policy configuration including fee rates and limits
      produces:
        - application/json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/models.Policy'
      summary: Get policy
      tags:
        - arcade
  /tx:
    post:
      consumes:
        - application/json
        - application/octet-stream
        - text/plain
      description: Submit a single transaction for broadcast. Accepts raw transaction bytes, hex string, or JSON with rawTx field.
      parameters:
        - description: Transaction data
          in: body
          name: transaction
          required: true
          schema:
            $ref: '#/definitions/fiber.TransactionRequest'
        - description: URL for status callbacks
          in: header
          name: X-CallbackUrl
          type: string
        - description: Token for SSE event filtering
          in: header
          name: X-CallbackToken
          type: string
        - description: Send all status updates (true/false)
          in: header
          name: X-FullStatusUpdates
          type: string
        - description: Skip fee validation (true/false)
          in: header
          name: X-SkipFeeValidation
          type: string
        - description: Skip script validation (true/false)
          in: header
          name: X-SkipScriptValidation
          type: string
      produces:
        - application/json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/models.TransactionStatus'
        "400":
          description: Bad Request
          schema:
            $ref: '#/definitions/errors.ErrorFields'
        "465":
          description: ARC validation error
          schema:
            $ref: '#/definitions/errors.ErrorFields'
        "500":
          description: Internal Server Error
          schema:
            additionalProperties:
              type: string
            type: object
      summary: Submit transaction
      tags:
        - arcade
  /tx/{txid}:
    get:
      description: Get the current status of a submitted transaction
      parameters:
        - description: Transaction ID
          in: path
          name: txid
          required: true
          type: string
      produces:
        - application/json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/models.TransactionStatus'
        "404":
          description: Not Found
          schema:
            additionalProperties:
              type: string
            type: object
        "500":
          description: Internal Server Error
          schema:
            additionalProperties:
              type: string
            type: object
      summary: Get transaction status
      tags:
        - arcade
  /txs:
    post:
      consumes:
        - application/json
      description: Submit multiple transactions for broadcast
      parameters:
        - description: Array of transactions
          in: body
          name: transactions
          required: true
          schema:
            items:
              $ref: '#/definitions/fiber.TransactionRequest'
            type: array
        - description: URL for status callbacks
          in: header
          name: X-CallbackUrl
          type: string
        - description: Token for SSE event filtering
          in: header
          name: X-CallbackToken
          type: string
        - description: Send all status updates (true/false)
          in: header
          name: X-FullStatusUpdates
          type: string
        - description: Skip fee validation (true/false)
          in: header
          name: X-SkipFeeValidation
          type: string
        - description: Skip script validation (true/false)
          in: header
          name: X-SkipScriptValidation
          type: string
      produces:
        - application/json
      responses:
        "200":
          description: OK
          schema:
            items:
              $ref: '#/definitions/models.TransactionStatus'
            type: array
        "400":
          description: Bad Request
          schema:
            $ref: '#/definitions/errors.ErrorFields'
        "465":
          description: ARC validation error
          schema:
            $ref: '#/definitions/errors.ErrorFields'
      summary: Submit multiple transactions
      tags:
        - arcade
securityDefinitions:
  BearerAuth:
    description: Bearer token authentication
    in: header
    name: Authorization
    type: apiKey
swagger: "2.0"
